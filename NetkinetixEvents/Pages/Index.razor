@page "/"
@inject ISiteEventService SiteEventService
@inject NavigationManager NavigationManager

<BSContainer>
    <BSRow>
    <h2 class="mb-3">Events Administration</h2>
    </BSRow>
    <BSRow>
        <BSCol Column="6" Class="color-grey">
            <div class="mb-3">
                <BSLabel>Event Title Contains</BSLabel>
                <BSInput InputType="InputType.Email" placeholder="Event name" Value="@("")" />
            </div>
            <div class="mb-3">
                <BSLabel>Start Date After</BSLabel>
                <BSInput InputType="InputType.Date" Value="@("")" />
            </div>
            <div class="mb-3">
                <BSLabel>Start Date Before</BSLabel>
                <BSInput InputType="InputType.Date" Value="@("")" />
            </div>
            <div class="mb-3">
                <BSButton Class="btn btn-primary">Search Events</BSButton>
            </div>
        </BSCol>
        <BSCol Column="6" Align="Align.Center" Class="text-center">
            <BSButton Class="btn btn-success">Add New Event</BSButton>
        </BSCol>
    </BSRow>
</BSContainer>
<BSContainer>
    @if(SiteEventService.seEvents == null)
    {
        <h3 class="text-primary">Loading...</h3>
    }
    else{
        <BSTable Class="table-hover">
            <BSTHead>
                <BSTR>
                    <BSTD>
                        Event Name
                    </BSTD>
                    <BSTD>
                        Start Date
                    </BSTD>
                    <BSTD>
                        Description
                    </BSTD>
                    <BSTD>
                        External Site
                    </BSTD>
                </BSTR>
            </BSTHead>
            <BSTBody>
                @foreach (var seEvent in SiteEventService.seEvents)
                {
                    <BSTR>
                        <BSTD>
                            <BSLink @onclick="(() => ShowSeEvent(seEvent.SeId))">@seEvent.SeTitle</BSLink>
                        </BSTD>
                        <BSTD>
                            @seEvent.SeStartDate.ToString("MM/dd/yyyy")
                        </BSTD>
                        <BSTD>
                            @seEvent.SeDescription
                        </BSTD>
                        <BSTD>
                            <BSLink href="@seEvent.SeURL" Target="_blank">Visit Website</BSLink>
                            
                        </BSTD>
                    </BSTR>
                }
            </BSTBody>
        </BSTable>
    }
</BSContainer>


@code {
    protected override async Task OnInitializedAsync()
    {
        await SiteEventService.GetAllEvents();
    }

    void ShowSeEvent(int seId)
    {
        NavigationManager.NavigateTo($"event/{seId}");
    }
}